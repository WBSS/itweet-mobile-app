<ng-include src="'app/menu.html'"></ng-include>
<md-content flex>
    <md-subheader class="md-primary" style="{{::subheaderStyle}}">
        <span translate>attribute_train_subheader</span>
        <!--&nbsp;<span translate>lbl_info_file_mandatory_multi</span>-->
    </md-subheader>
    <div ng-switch="vm.loaded" class="md-padding">
        <div ng-switch-when="false" layout="row" layout-sm="column" layout-align="center center">
            <p translate>loading</p>
        </div>
        <form ng-switch-default name="inputForm" ng-submit="vm.save()">
            <p translate>train_train_number</p>
            <md-autocomplete
                    md-delay="200"
                    md-selected-item="vm.selectedTrain"
                    md-search-text="vm.searchTrainText"
                    md-items="train in vm.querySearch(vm.searchTrainText,vm.trains)"
                    md-item-text="vm.getFullTrain(train)"
                    md-min-length="0"
                    placeholder="{{'search' | translate}}">
                <md-item-template>
                    <span md-highlight-text="vm.searchTrainText" md-highlight-flags="i">{{vm.getFullTrain(train)}}</span>
                </md-item-template>
            </md-autocomplete>
            <p translate>train_vehicle_number</p>
            <md-autocomplete
                    md-selected-item-change="vm.onSelectedWagon()"
                    md-delay="200"
                    md-selected-item="vm.selectedWagon"
                    md-search-text="vm.searchWagonText"
                    md-items="wagon in vm.querySearch(vm.searchWagonText, vm.wagons)"
                    md-item-text="vm.getFullWagon(wagon)"
                    md-min-length="0"
                    placeholder="{{'search' | translate}}">
                <md-item-template>
                    <span md-highlight-text="vm.searchWagonText" md-highlight-flags="i">{{vm.getFullWagon(wagon)}}</span>
                </md-item-template>
            </md-autocomplete>

            <md-card ng-show="vm.addedWagons.length !== 0">
                <md-list>
                    <md-list-item class="md-2-line" ng-repeat="wagonAutocomplete in vm.addedWagons">
                        <div class="md-list-item-text">
                            <p>{{vm.getFullWagon(wagonAutocomplete)}}</p>
                        </div>
                        <md-icon ng-click="vm.removeWagon($index)" md-svg-icon="img/icon_remove.svg"></md-icon>
                        <md-divider ng-if="!$last"></md-divider>
                    </md-list-item>
                </md-list>
            </md-card>
        </form>
    </div>
</md-content>

<footer>
    <md-button type="submit" ng-click="vm.nextClicked()" class="md-primary footer-button" style="{{::footerStyle}}">
        <span translate>location_button_next</span>
    </md-button>
</footer>